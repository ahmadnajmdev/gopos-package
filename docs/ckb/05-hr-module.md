# مۆدیوڵی سەرچاوە مرۆییەکان (HR)

## پێشەکی

مۆدیوڵی HR بەڕێوەبردنی تەواوی ژیانی کارمەند دابین دەکات - لە دامەزراندن و گرێبەست تا مووچە. بەڕێوەبردنی پێکهاتەی ڕێکخستنی، بەدواداچوونی ئامادەبوون، چارەسەری داواکاری مۆڵەت، و ڕێکخستنی مووچە بە حیسابە ئۆتۆماتیکییەکان. دیزاین کراوە بۆ بازاڕی عێراق/کوردستان بە پشتگیری سێ زمانی (ئینگلیزی، عەرەبی، کوردی سۆرانی).

---

## بۆچی ئەم تایبەتمەندییانە بەکار بهێنم؟

### سوودە سەرەکییەکان

| سوود | چۆن یارمەتی کارەکەت دەدات |
|------|---------------------------|
| **داتای ناوەندی کارمەند** | هەموو زانیارییەکانی کارمەند لە شوێنێکدا |
| **ئامادەبوونی ئۆتۆماتیک** | بەدواداچوونی کاتژمێر، درەنگ هاتن، زوو چوون |
| **بەڕێوەبردنی مۆڵەت** | داواکردن، پەسەندکردن، بەدواداچوونی باڵانسی مۆڵەت |
| **ئامادەکردنی مووچە** | حیسابکردنی مووچە، بڕینەوە، دروستکردنی پسوڵەی مووچە |
| **پابەندبوون** | بەدواداچوونی گرێبەست، بەڵگەنامە، پێداویستی یاسایی |
| **خزمەتگوزاری خۆیی** | کارمەندان دەتوانن زانیاریی خۆیان ببینن |

### کێشەکانی چارەسەر دەکات

- **"دۆسیەی کارمەندان لە هەموو شوێنێک پەرت بووە"** - بنکەی داتای ناوەندی کارمەند
- **"ئامادەبوون بە دەستی لەسەر کاغەز بەدوادەچین"** - بەدواداچوونی ئامادەبوونی دیجیتاڵ
- **"حیسابی باڵانسی مۆڵەت تێکەڵاوە"** - بەدواداچوونی ئۆتۆماتیکی باڵانس
- **"مووچە چەند ڕۆژ دەخایەنێت بۆ ئامادەکردن"** - حیسابی ئۆتۆماتیکی مووچە
- **"بەڵگەنامەی بەسەرچوومان بیر دەچێتەوە"** - ئاگادارکردنەوەی بەسەرچوونی بەڵگەنامە
- **"کارمەندان هەمیشە HR دەپرسن بۆ پسوڵەی مووچە"** - دەستگەیشتنی خزمەتگوزاری خۆیی

---

## کێ دەبێت ئەمە بخوێنێتەوە؟

| ڕۆڵ | بەشە پەیوەندیدارەکان |
|-----|---------------------|
| **بەڕێوەبەرانی HR** | هەموو بەشەکان |
| **ستافی HR** | کارمەندان، ئامادەبوون، مۆڵەت |
| **بەرپرسانی مووچە** | مووچە، قەرزی کارمەند |
| **بەڕێوەبەرانی بەش** | ئامادەبوون، پەسەندکردنی مۆڵەت |
| **کارمەندان** | تایبەتمەندییەکانی خزمەتگوزاری خۆیی |

---

## پێکهاتەکانی مۆدیوڵ

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         مۆدیوڵی HR                                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌────────────────────┐   بەشەکان، پۆستەکان، پێکهاتەی ڕاپۆرتدان         │
│  │  پێکهاتەی ڕێکخستنی │   بەکاربهێنە کاتێک: دامەزراندنی پێکهاتەی کۆمپانیا │
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   پرۆفایلی کارمەند، گرێبەست، بەڵگەنامە          │
│  │     کارمەندان      │   بەکاربهێنە کاتێک: بەڕێوەبردنی زانیاریی کارمەند  │
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   تۆمارکردنی هاتن/چوون، کاتژمێری کار، خشتە       │
│  │     ئامادەبوون     │   بەکاربهێنە کاتێک: بەدواداچوونی کاتژمێری ڕۆژانە  │
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   داواکاری مۆڵەت، پەسەندکردن، باڵانسەکان         │
│  │  بەڕێوەبردنی مۆڵەت │   بەکاربهێنە کاتێک: چارەسەری داواکاری پشوو        │
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   حیسابکردنی مووچە، پسوڵەی مووچە، پێکهاتەکان     │
│  │       مووچە        │   بەکاربهێنە کاتێک: ئامادەکردنی مووچەی مانگانە    │
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   قەرزی کارمەند و بەدواداچوونی دانەوە            │
│  │   قەرزی کارمەند    │   بەکاربهێنە کاتێک: بەڕێوەبردنی پێشینە/قەرز      │
│  └────────────────────┘                                                 │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## تایبەتمەندی ١: پێکهاتەی ڕێکخستنی

### چییە؟

پێکهاتەی ڕێکخستنی ڕیزبەندی (Hierarchy) کۆمپانیاکەت دیاری دەکات - بەشەکان، پۆستەکان، و پەیوەندییەکانی ڕاپۆرتدان. ئەمە بنەمای هەموو کارەکانی HR پێک دەهێنێت.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **ڕیزبەندی ڕوون** | کێ ڕاپۆرت دەدات بە کێ |
| **بەدواداچوونی بەش** | گروپکردنی کارمەندان بەپێی بەش |
| **بەڕێوەبردنی پۆست** | پێناسەی ناو و ئاستی کار |
| **یەکگرتنی بودجە** | بەستن بە ناوەندی تێچوو بۆ ژمێریاری |
| **گەشەپێدان** | لەگەڵ ڕێکخستنەکەت گەشە دەکات |

### کەی بەکاربهێنە

| سیناریۆ | کردار |
|---------|-------|
| دامەزراندنی HR بۆ یەکەم جار | بەش و پۆستەکان دروست بکە |
| بەشی نوێ دروست کرا | بەش زیاد بکە بۆ پێکهاتە |
| ناوی کاری نوێ پێویستە | پۆست دروست بکە |
| پێکهاتەی نوێ | پەیوەندییەکانی ڕاپۆرتدان نوێ بکەوە |
| دامەزراندنی کارمەند | دابەش بکە بۆ بەش و پۆست |

### کەیسی بەکارهێنان: دامەزراندنی پێکهاتەی کۆمپانیا

**سیناریۆ:** کۆمپانیای فرۆشتنی تاک بە ٣ فرۆشگا

**پێکهاتە:**
```
کۆمپانیا
├── بەڕێوەبەرایەتی
│   ├── بەشی HR
│   └── بەشی دارایی
├── ئۆپەراسیۆن (Operations)
│   ├── فرۆشگای A
│   ├── فرۆشگای B
│   └── فرۆشگای C
└── کۆگا
```

**پۆستەکان:**
- بەڕێوەبەری فرۆشگا
- کاشێر
- ستافی کۆگا
- بەرپرسی HR
- ژمێریار

### چۆن بەکاربهێنە (هەنگاوەکانی UI)

#### دروستکردنی بەشەکان

1. بڕۆ بۆ **HR > بەشەکان**
2. کلیک بکە لەسەر **دروستکردنی بەش**
3. بنووسە:
   - **ناو** (لە هەموو زمانەکان)
   - **کۆد** (وەک HR-001)
   - **بەشی باوان** (بۆ ڕیزبەندی)
   - **بەڕێوەبەر** (سەرۆکی بەش)
   - **ناوەندی تێچوو** (بۆ ژمێریاری)
4. کلیک بکە لەسەر **دروستکردن**

#### دروستکردنی پۆستەکان

1. بڕۆ بۆ **HR > پۆستەکان**
2. کلیک بکە لەسەر **دروستکردنی پۆست**
3. بنووسە:
   - **ناو** (لە هەموو زمانەکان)
   - **کۆد** (وەک POS-CASHIER)
   - **بەش** (پۆست بۆ کوێیە)
   - **ئاست/پلە** (بۆ مەودای مووچە)
   - **وەسف** (بەرپرسیاریەتی کار)
4. کلیک بکە لەسەر **دروستکردن**

### چۆن بەکاربهێنە (کۆد)

```php
use App\Models\Department;
use App\Models\Position;

// دروستکردنی بەش
$salesDept = Department::create([
    'name' => 'Sales Department',
    'name_ar' => 'قسم المبيعات',
    'name_ckb' => 'بەشی فرۆشتن',
    'code' => 'DEPT-SALES',
    'parent_id' => $operationsDept->id,
    'manager_id' => $manager->id,
    'cost_center_id' => $costCenter->id,
    'is_active' => true,
]);

// دروستکردنی پۆست
$position = Position::create([
    'title' => 'Sales Representative',
    'title_ar' => 'مندوب مبيعات',
    'title_ckb' => 'نوێنەری فرۆشتن',
    'code' => 'POS-SALES-REP',
    'department_id' => $salesDept->id,
    'grade' => 'B',
    'min_salary' => 500000,
    'max_salary' => 800000,
    'description' => 'بەرپرسیارە بۆ فرۆشتنی لای کییاران...',
    'is_active' => true,
]);

// ڕیزبەندی بەشەکان بگرەوە
$departments = Department::with('children', 'employees')->get();

// پۆستەکانی بەش بگرەوە
$positions = Position::where('department_id', $salesDept->id)->get();
```

### باشترین ڕێکارەکان

| بکە | مەکە |
|-----|------|
| پێکهاتە دامەزرێنە پێش زیادکردنی کارمەندان | کارمەند زیاد بکە بەبێ پێکهاتە |
| بەڕێوەبەر دابنێ بۆ بەشەکان | بەشەکان بەبێ سەرۆک بهێڵەوە |
| کۆدی یەکگرتوو بەکاربهێنە | کۆدی هەرەمەکی بەکاربهێنە |
| بەستە بە ناوەندی تێچوو | یەکگرتنی ژمێریاری پشتگوێ بخە |

---

## تایبەتمەندی ٢: بەڕێوەبردنی کارمەند

### چییە؟

بەڕێوەبردنی کارمەند هەموو زانیاری سەبارەت بە ستافەکەت هەڵدەگرێت - زانیاری کەسی، وردەکاری دامەزراندن، گرێبەست، بەڵگەنامە، و پەیوەندییەکان. ئەمە دۆسیەی ناوەندی کارمەندە.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **تۆماری تەواو** | هەموو شتێک سەبارەت بە کارمەند لە شوێنێکدا |
| **بەدواداچوونی گرێبەست** | گرێبەستی دامەزراندن لەگەڵ بەروار |
| **هەڵگرتنی بەڵگەنامە** | ناسنامە، بڕوانامە، مۆڵەتنامە |
| **پەیوەندی نائاسایی** | دەستگەیشتنی خێرا بە پەیوەندییەکان |
| **مێژوو** | بەدواداچوونی گۆڕانی پۆست و مووچە |

### کەی بەکاربهێنە

| سیناریۆ | کردار |
|---------|-------|
| دامەزراندنی کارمەندی نوێ | دۆسیەی کارمەند دروست بکە |
| بەرزکردنەوەی پلەی کارمەند (Promotion) | پۆست و مووچە نوێ بکەوە |
| نوێکردنەوەی گرێبەست | بەروارەکانی گرێبەست نوێ بکەوە |
| بەڵگەنامە بەسەرچوو | بەڵگەنامەی نوێ بار بکە |
| کارمەند دەچێت | نیشان بکە وەک ناچالاک، بەرواری کۆتایی تۆمار بکە |

### کەیسی بەکارهێنان: دامەزراندنی کارمەندی نوێ

**سیناریۆ:** دامەزراندنی ئەحمەد وەک نوێنەری فرۆشتنی نوێ

**هەنگاوەکان:**
1. دۆسیەی نوێ بە زانیاری کەسی دروست بکە
2. وردەکاری دامەزراندن دابنێ (بەرواری دەستپێکردن، بەش، پۆست)
3. مووچە و زانیاری پارەدان دابنێ
4. بەڵگەنامەکان بار بکە (ناسنامە، وێنە، بڕوانامە)
5. هەژمار بۆ دەستگەیشتنی سیستەم دروست بکە
6. خشتەی کار دابەش بکە
7. باڵانسی مۆڵەت دەستپێ بکە

### چۆن بەکاربهێنە (هەنگاوەکانی UI)

#### دروستکردنی کارمەند

1. بڕۆ بۆ **HR > کارمەندان**
2. کلیک بکە لەسەر **دروستکردنی کارمەند**
3. **زانیاری کەسی:**
   - ناو (هەموو زمانەکان)، بەرواری لەدایکبوون، ڕەگەز
   - ژمارەی ناسنامە، تەلەفۆن، ئیمەیڵ
   - ناونیشان، پەیوەندی نائاسایی
4. **وردەکاری دامەزراندن:**
   - کۆدی کارمەند (ئۆتۆماتیک یان دەستی)
   - بەش و پۆست
   - جۆری دامەزراندن (تەواوکات، نیوەکات، گرێبەست)
   - بەرواری دەستپێکردن، بەرواری کۆتایی گرێبەست
   - بەڕێوەبەر (ڕاپۆرت دەدات بۆ کێ)
5. **قەرەبوو (Compensation):**
   - مووچەی بنەڕەت
   - ڕێگای پارەدان (نەقد، گواستنەوەی بانکی)
   - هەژماری بانک (ئەگەر هەبوو)
6. **بەڵگەنامەکان:**
   - کۆپیی ناسنامە، وێنە، بڕوانامەکان بار بکە
   - بەرواری بەسەرچوون بۆ بەڵگەنامەکان دابنێ
7. کلیک بکە لەسەر **دروستکردن**

### چۆن بەکاربهێنە (کۆد)

```php
use App\Models\Employee;
use App\Models\EmployeeDocument;
use App\Services\HR\EmployeeService;

$employeeService = app(EmployeeService::class);

// دروستکردنی کارمەند
$employee = $employeeService->createEmployee([
    // زانیاری کەسی
    'first_name' => 'Ahmed',
    'first_name_ar' => 'أحمد',
    'last_name' => 'Hassan',
    'last_name_ar' => 'حسن',
    'date_of_birth' => '1990-05-15',
    'gender' => 'male',
    'national_id' => '12345678901234',
    'phone' => '+964 750 123 4567',
    'email' => 'ahmed@company.com',

    // دامەزراندن
    'employee_code' => 'EMP-001',
    'department_id' => $salesDept->id,
    'position_id' => $salesRep->id,
    'employment_type' => 'full_time',
    'hire_date' => '2026-01-15',
    'basic_salary' => 600000,
]);

// جۆرەکانی دامەزراندن
Employee::TYPE_FULL_TIME;   // تەواوکات هەمیشەیی
Employee::TYPE_PART_TIME;   // نیوەکات
Employee::TYPE_CONTRACT;    // گرێبەستی کاتی
Employee::TYPE_TEMPORARY;   // کرێکاری کاتی
Employee::TYPE_INTERN;      // خوێندکاری ڕاهێنان

// دۆخەکانی دامەزراندن
Employee::STATUS_ACTIVE;      // لە کارە (ئێستا)
Employee::STATUS_ON_LEAVE;    // لە مۆڵەت
Employee::STATUS_SUSPENDED;   // ڕاگیرکراو
Employee::STATUS_TERMINATED;  // دامەزراندن کۆتایی هات
Employee::STATUS_RESIGNED;    // دەستی لە کار کێشایەوە

// زیادکردنی بەڵگەنامە
EmployeeDocument::create([
    'employee_id' => $employee->id,
    'type' => 'national_id',
    'name' => 'کارتی ناسنامەی نیشتمانی',
    'file_path' => 'documents/emp-001/national-id.pdf',
    'expiry_date' => '2030-01-01',
]);

// کارمەندان بە بەڵگەنامەی نزیکی بەسەرچوون بگرەوە
$expiringDocs = $employeeService->getExpiringContracts(days: 30);
```

### باشترین ڕێکارەکان

| بکە | مەکە |
|-----|------|
| هەموو خانە پێویستەکان پڕ بکەوە | تۆمارەکان کەم بهێڵەوە |
| کۆپیی بەڵگەنامەکان بار بکە | تەنها تۆماری کاغەزی بپارێزە |
| بەرواری بەسەرچوونی بەڵگەنامە دابنێ | نوێکردنەوەی بەڵگەنامە بیر بچێتەوە |
| تۆمارەکان دەستبەجێ نوێ بکەوە | تۆمارەکان بهێڵە کۆن ببن |

---

## تایبەتمەندی ٣: بەدواداچوونی ئامادەبوون

### چییە؟

بەدواداچوونی ئامادەبوون تۆمار دەکات کەی کارمەندان دەست بە کار دەکەن و کۆتایی دەهێنن هەر ڕۆژ. بە ئۆتۆماتیکی کاتژمێری کار، کاتی زیادە (Overtime)، درەنگ هاتن، و زوو چوون حیساب دەکات بەپێی خشتەی کار.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **تۆماری دروست** | تەنها بزانە کەی کارمەندان کار دەکەن |
| **حیسابی ئۆتۆماتیک** | سیستەم کاتژمێر، درەنگی، زیادە حیساب دەکات |
| **یەکگرتنی خشتەی کار** | بەراورد لەگەڵ خشتەی چاوەڕوان |
| **پەیوەندی مووچە** | ئامادەبوون ڕادەستی مووچە دەکات |
| **ڕێگای جۆراوجۆر** | تۆمارکردنی دەستی، هاتن/چوون، هاوردن (Import) |

### کەی بەکاربهێنە

| سیناریۆ | کردار |
|---------|-------|
| کارمەند دەگات بۆ کار | هاتن تۆمار بکە |
| کارمەند دەچێت لە کار | چوون تۆمار بکە |
| پێداچوونەوەی ئامادەبوونی مانگانە | ڕاپۆرتی ئامادەبوون دروست بکە |
| ئامادەکردنی مووچە | داتای ئامادەبوون بەکاربهێنە |

### کەیسی بەکارهێنان: تۆمارکردنی ئامادەبوونی ڕۆژانە

**سیناریۆ:** بەدواداچوونی ئامادەبوونی ڕۆژانە بۆ کارمەندانی فرۆشگا

**خشتەی کار:** ٩:٠٠ بەیانی - ٥:٠٠ ئێوارە (٨ کاتژمێر)

**ئامادەبوونی ئەحمەد:**
- تۆمارکردنی هاتن: ٩:١٥ بەیانی (١٥ خولەک درەنگ)
- تۆمارکردنی چوون: ٦:٠٠ ئێوارە (١ کاتژمێر زیادە)
- کاتژمێری کار: ٨:٤٥
- کاتژمێری ئاسایی: ٨
- کاتی زیادە: ٠:٤٥

### چۆن بەکاربهێنە (هەنگاوەکانی UI)

#### دامەزراندنی خشتەی کار

1. بڕۆ بۆ **HR > خشتەی کار**
2. کلیک بکە لەسەر **دروستکردنی خشتە**
3. بنووسە:
   - **ناو** (وەک "کاتژمێری کاری فەرمی")
   - **ڕۆژەکانی کار** (یەکشەممە-پێنجشەممە بۆ عێراق)
   - **کاتی دەستپێکردن** و **کاتی کۆتایی**
   - **ماوەی پشوو** (پشووی نیوەڕۆ)
   - **ماوەی ڕێپێدراو (Tolerance)** (خولەک پێش ئەوەی درەنگ بێت)
4. کلیک بکە لەسەر **دروستکردن**

#### تۆمارکردنی ئامادەبوون

**تۆمارکردنی دەستی:**
1. بڕۆ بۆ **HR > ئامادەبوون**
2. کلیک بکە لەسەر **زیادکردنی ئامادەبوون**
3. کارمەند و بەروار هەڵبژێرە
4. کاتی هاتن و چوون بنووسە
5. پاشەکەوت بکە

**خزمەتگوزاری خۆیی کارمەند:**
1. کارمەند کلیک دەکات لەسەر **تۆمارکردنی هاتن (Clock In)** کاتێک دەگات
2. سیستەم کاتی ئێستا تۆمار دەکات
3. کارمەند کلیک دەکات لەسەر **تۆمارکردنی چوون (Clock Out)** کاتێک دەڕوات

### چۆن بەکاربهێنە (کۆد)

```php
use App\Models\Attendance;
use App\Models\WorkSchedule;
use App\Services\HR\AttendanceService;

$attendanceService = app(AttendanceService::class);

// دروستکردنی خشتەی کار
$schedule = WorkSchedule::create([
    'name' => 'Standard Office Hours',
    'name_ar' => 'ساعات العمل الرسمية',
    'name_ckb' => 'کاتژمێری کاری فەرمی',
    'work_days' => ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday'],
    'start_time' => '09:00',
    'end_time' => '17:00',
    'break_duration' => 60,
    'late_tolerance' => 15,
    'is_active' => true,
]);

// تۆمارکردنی هاتن
$attendance = $attendanceService->clockIn($employee, 'ئۆفیس', '192.168.1.1');

// تۆمارکردنی چوون
$attendanceService->clockOut($employee, 'ئۆفیس', '192.168.1.1');

// دۆخەکانی ئامادەبوون
Attendance::STATUS_PRESENT;  // ئامادەبوونی ئاسایی
Attendance::STATUS_ABSENT;   // نەهاتوو
Attendance::STATUS_LATE;     // درەنگ هاتوو
Attendance::STATUS_LEAVE;    // لە مۆڵەتی پەسەندکراو
Attendance::STATUS_HOLIDAY;  // پشووی فەرمی

// ڕاپۆرتی ئامادەبوون بگرەوە
$report = $attendanceService->getEmployeeSummary($employee, 2026, 1);
// دەگەڕێتەوە: days_present, days_absent, total_hours, overtime_hours, late_count
```

### باشترین ڕێکارەکان

| بکە | مەکە |
|-----|------|
| خشتە دامەزرێنە پێش بەدواداچوون | بەدواداچوون بکە بەبێ خشتە |
| ئامادەبوون ڕۆژانە تۆمار بکە | کۆتایی مانگ بە کۆمەڵ تۆمار بکە |
| ڕۆژەکانی نەهاتوو لێکۆڵینەوە بکە | نەهاتووەکان بە ڕوون نەکراوە پشتگوێ بخە |
| پێش مووچە پێداچوونەوە بکە | مووچە کوێرانە ئامادە بکە |

---

## تایبەتمەندی ٤: بەڕێوەبردنی مۆڵەت

### چییە؟

بەڕێوەبردنی مۆڵەت داواکاری پشووی کارمەندان دەخاتە ڕوو - لە پێشکەشکردن تا پەسەندکردن تا بەدواداچوونی باڵانس. پشتگیری چەند جۆری مۆڵەت بە سیاسەتی ڕێکخراو.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **داواکاری خزمەتگوزاری خۆیی** | کارمەندان خۆیان داواکاری پێشکەش دەکەن |
| **زنجیرەی پەسەندکردن** | پەسەندکردنی بەڕێوەبەر لەگەڵ ئاگادارکردنەوە |
| **بەدواداچوونی باڵانس** | حیسابە ئۆتۆماتیکییەکانی باڵانس |
| **جێبەجێکردنی سیاسەت** | ڕێساکانی مۆڵەت بە ئۆتۆماتیکی جێبەجێ دەکات |
| **بینینی ڕۆژنامە** | ببینە کێ لە پشوودایە و کەی |

### جۆرەکانی مۆڵەت

| جۆر | وەسف | سیاسەتی نموونە |
|-----|------|----------------|
| **ساڵانە** | پشوو/مۆڵەت | ٢١-٣٠ ڕۆژ/ساڵ |
| **نەخۆشی** | مۆڵەتی پزیشکی | بەپێی پێویستی لەگەڵ بەڵگەنامە |
| **بەبێ مووچە** | مۆڵەت بەبێ پارە | بەپێی پەسەندکردن |
| **دایکایەتی** | مۆڵەتی منداڵبوون | ٧٢ ڕۆژ (یاسای عێراق) + |
| **نائاسایی** | بارودۆخی تایبەت | ٣-٥ ڕۆژ |

### کەی بەکاربهێنە

| سیناریۆ | کردار |
|---------|-------|
| کارمەند پشوو پێویستە | داواکاری مۆڵەت پێشکەش بکە |
| بەڕێوەبەر پێداچوونەوە دەکات | پەسەند یان ڕەت بکە |
| ساڵی نوێ دەستپێ دەکات | باڵانسەکان دەستپێ بکە |
| پلاندانانی سەرچاوە | ڕۆژنامەی مۆڵەت ببینە |

### کەیسی بەکارهێنان: داواکاری مۆڵەتی ساڵانە

**سیناریۆ:** ئەحمەد داوای ٥ ڕۆژ پشوو دەکات

**پرۆسە:**
1. ئەحمەد داواکاری مۆڵەت پێشکەش دەکات (٢٠-٢٤ی کانوونی دووەم)
2. سیستەم باڵانس دەپشکنێت (٢١ ڕۆژی هەیە)
3. بەڕێوەبەر ئاگادارکردنەوە وەردەگرێت
4. بەڕێوەبەر پەسەند دەکات
5. باڵانسی ئەحمەد: ٢١ → ١٦ ڕۆژ ماوە

### چۆن بەکاربهێنە (کۆد)

```php
use App\Models\LeaveType;
use App\Models\LeaveRequest;
use App\Services\HR\LeaveService;

$leaveService = app(LeaveService::class);

// دروستکردنی جۆری مۆڵەت
$annualLeave = LeaveType::create([
    'name' => 'Annual Leave',
    'name_ar' => 'إجازة سنوية',
    'name_ckb' => 'مۆڵەتی ساڵانە',
    'code' => 'ANNUAL',
    'default_days' => 21,
    'is_paid' => true,
    'can_carry_forward' => true,
    'max_carry_forward' => 5,
]);

// پێشکەشکردنی داواکاری مۆڵەت
$request = $leaveService->submitRequest(
    employee: $employee,
    leaveTypeId: $annualLeave->id,
    startDate: Carbon::parse('2026-02-15'),
    endDate: Carbon::parse('2026-02-19'),
    reason: 'گەشتی خێزانی'
);

// پەسەندکردنی داواکاری
$leaveService->approveRequest($request, $manager->id);

// ڕەتکردنەوەی داواکاری
$leaveService->rejectRequest($request, $manager->id, 'داپۆشینی ناتەواو');

// پوختەی مۆڵەتی کارمەند بگرەوە
$summary = $leaveService->getEmployeeSummary($employee, 2026);
// دەگەڕێتەوە: entitled, used, pending, available بۆ هەر جۆری مۆڵەت
```

### باشترین ڕێکارەکان

| بکە | مەکە |
|-----|------|
| باڵانسەکان ساڵانە دەستپێ بکە | دامەزراندنی باڵانس بیر بچێتەوە |
| بەڵگەنامە بۆ مۆڵەتی نەخۆشی داوا بکە | بەبێ بەڵگە پەسەند بکە |
| داواکاریی چاوەڕوان ڕۆژانە پێداچوونەوە بکە | داواکارییەکان بهێڵە کۆ ببنەوە |

---

## تایبەتمەندی ٥: ئامادەکردنی مووچە (Payroll)

### چییە؟

ئامادەکردنی مووچە، مووچەی کارمەندان حیساب دەکات بەپێی ئامادەبوون، مۆڵەت، پاداشت، بڕینەوە (Deductions)، و دانەوەی قەرز. پسوڵەی مووچە دروست دەکات و بە ئارەزوو تۆمار دەکات لە ژمێریاری.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **حیسابی ئۆتۆماتیک** | حیسابی دەستی مووچە نییە |
| **بنچینەی پێکهاتە** | پاداشت و بڕینەوەی نەرم |
| **یەکگرتنی ئامادەبوون** | داتای ئامادەبوون بە ئۆتۆماتیکی دەکێشێت |
| **بڕینەوەی قەرز** | دانەوەی ئۆتۆماتیکی قەرز |
| **دروستکردنی پسوڵە** | پسوڵەی مووچەی پیشەیی |

### کەی بەکاربهێنە

| سیناریۆ | کردار |
|---------|-------|
| کۆتایی مانگ | ماوەی مووچە دروست بکە |
| پێداچوونەوەی مووچە | پسوڵەکانی مووچە دروست بکە |
| هەموو شتێک پشتڕاستکرایەوە | مووچە پەسەند بکە |
| پارەدان بۆ کارمەندان | وەک پارەدراو (Paid) نیشان بکە |

### کەیسی بەکارهێنان: مووچەی مانگانە

**سیناریۆ:** ئامادەکردنی مووچەی کانوونی دووەم ٢٠٢٦

**پرۆسە:**
1. ماوەی مووچە دروست بکە (١-٣١ی کانوونی دووەم، ٢٠٢٦)
2. سیستەم بۆ هەر کارمەند حیساب دەکات:
   - مووچەی بنەڕەت
   - ڕێکخستنەکانی ئامادەبوون
   - پاداشتەکان
   - بڕینەوە و قەرزەکان
   - مووچەی پاک (Net Pay)
3. پسوڵەکانی مووچە پێداچوونەوە بکە
4. مووچە پەسەند بکە
5. فایلی بانک دروست بکە بۆ پارەدان

### چۆن بەکاربهێنە (کۆد)

```php
use App\Models\PayrollPeriod;
use App\Models\PayrollComponent;
use App\Services\HR\PayrollService;

$payrollService = app(PayrollService::class);

// دروستکردنی پێکهاتەی مووچە
$transport = PayrollComponent::create([
    'name' => 'Transport Allowance',
    'name_ar' => 'بدل النقل',
    'name_ckb' => 'کرێی گواستنەوە',
    'code' => 'TRANSPORT',
    'type' => 'earning', // earning یان deduction
    'calculation_type' => 'fixed',
    'amount' => 50000,
    'is_taxable' => true,
]);

// دروستکردنی ماوەی مووچە
$period = $payrollService->createPeriod(2026, 1);

// ئامادەکردنی مووچە بۆ هەموو کارمەندان
$payrollService->processPayroll($period);

// پەسەندکردنی مووچە
$payrollService->approvePayroll($period, $approver->id);

// نیشانکردن وەک پارەدراو
$payrollService->markAsPaid($period, $payer->id);

// دروستکردنی فایلی بانک بۆ گواستنەوەکان
$bankFile = $payrollService->generateBankFile($period, 'csv');
```

### باشترین ڕێکارەکان

| بکە | مەکە |
|-----|------|
| پێکهاتەکان سەرەتا دامەزرێنە | پێکهاتە لە ناو ماوە زیاد بکە |
| هەر پسوڵەی مووچە پێداچوونەوە بکە | بەبێ پشکنین پەسەند بکە |
| مووچە مانگانە ئامادە بکە | درەنگ ئامادەکردنی مووچە |

---

## تایبەتمەندی ٦: قەرزی کارمەند

### چییە؟

قەرزی کارمەند پێشینە (Advance) و قەرزەکان بەدوادەچێت کە بە کارمەندان دەدرێن، لەگەڵ بڕینەوەی ئۆتۆماتیکی دانەوە لە مووچەکانیان.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **بەدواداچوونی قەرز** | مێژووی تەواوی قەرز |
| **بڕینەوەی ئۆتۆماتیک** | بڕینەوەی مانگانە لە مووچە |
| **بینینی باڵانس** | بەدواداچوونی باڵانسی ماوە |

### کەیسی بەکارهێنان: پێشینەی مووچە

**سیناریۆ:** ئەحمەد داوای ٥٠٠،٠٠٠ دینار پێشینە دەکات بەسەر ٥ مانگ

1. قەرز دروست بکە: ٥٠٠،٠٠٠ دینار، ٥ قیست
2. هەر ماوەی مووچە: ١٠٠،٠٠٠ دینار دەبڕێت
3. دوای ٥ مانگ: قەرز تەواو بوو

### چۆن بەکاربهێنە (کۆد)

```php
use App\Models\EmployeeLoan;
use App\Models\LoanRepayment;

// دروستکردنی قەرزی کارمەند
$loan = EmployeeLoan::create([
    'employee_id' => $employee->id,
    'loan_type' => 'salary_advance',
    'amount' => 500000,
    'installments' => 5,
    'monthly_installment' => 100000,
    'start_date' => '2026-02-01',
    'status' => 'active',
    'approved_by' => $manager->id,
]);

// باڵانسی ماوە بپشکنە
$remaining = $loan->remaining_balance;
```

---

## سەرچاوەی تەکنیکی

### خزمەتگوزارییەکان

| خزمەتگوزاری | مەبەست |
|-------------|--------|
| `AttendanceService` | تۆمارکردنی هاتن/چوون، ڕاپۆرتی ئامادەبوون |
| `LeaveService` | داواکاری مۆڵەت، باڵانس، پەسەندکردن |
| `PayrollService` | ئامادەکردنی مووچە، پسوڵەی مووچە |
| `EmployeeService` | CRUD کارمەند، بەڵگەنامە، کۆتایی |

### خشتەکانی بنکەی داتا (Database)

| خشتە | مەبەست |
|------|--------|
| `departments` | پێکهاتەی ڕێکخستنی |
| `positions` | پۆستەکانی کار |
| `employees` | تۆمارەکانی کارمەند |
| `work_schedules` | پێناسەی کاتژمێری کار |
| `attendances` | تۆماری ئامادەبوونی ڕۆژانە |
| `holidays` | ڕۆژنامەی پشووی فەرمی |
| `leave_types` | پێناسەی جۆرەکانی مۆڵەت |
| `leave_balances` | باڵانسی مۆڵەتی کارمەندان |
| `leave_requests` | زنجیرەی داواکاری مۆڵەت |
| `payroll_components` | پێکهاتەکانی مووچە |
| `payroll_periods` | ماوەکانی مووچەی مانگانە |
| `payslips` | پسوڵەکانی مووچەی کارمەند |
| `employee_loans` | بەدواداچوونی قەرز |

---

## چارەسەرکردنی کێشەکان

### ئامادەبوون بە دروستی حیساب ناکات

**چارەسەرەکان:**
1. پشتڕاست بکەوە خشتەی کار دابەشکراوە
2. کاتەکانی خشتە بپشکنە دروستن
3. پشتڕاست بکەوە کاتەکانی هاتن/چوون تۆمارکراون

---

### باڵانسی مۆڵەت هەڵەیە

**چارەسەرەکان:**
1. بپشکنە باڵانسی سەرەتا دانراوە
2. پشتڕاست بکەوە مۆڵەتی پەسەندکراو بڕاوەتەوە
3. گواستنەوەی ساڵی پێشوو (Carry Forward) بپشکنە

---

### بڕینەوەی مووچە ونە

**چارەسەرەکان:**
1. پشتڕاست بکەوە پێکهاتە بە کارمەند دابەشکراوە
2. بپشکنە پێکهاتە چالاکە
3. پسوڵەی مووچە نوێ دروست بکە دوای گۆڕانکارییەکان

---

*دوایین نوێکردنەوە: کانوونی دووەم ٢٠٢٦*
