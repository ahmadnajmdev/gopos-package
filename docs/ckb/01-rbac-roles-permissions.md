# کۆنترۆڵی دەسەڵاتەکان بەپێی ڕۆڵ (RBAC)

## پوختە

سیستەمی RBAC کۆنترۆڵ دەکات **کێ دەتوانێت چی بکات** لە GoPOS. لە جیاتی بەڕێوەبردنی دەسەڵاتەکان بۆ هەر بەکارهێنەرێک بە جیا، تۆ ڕۆڵ دروست دەکەیت (وەک "کاشێر" یان "بەڕێوەبەر") و دەیاندەیت بە بەکارهێنەران. ئەمە بەڕێوەبردنی ئاسایش ئاسان و فراوان دەکات.

---

## بۆچی RBAC بەکاربهێنیت؟

### سوودە سەرەکییەکان

| سوود | چۆن یارمەتی دەدات |
|------|-------------------|
| **ئاسایش** | بەکارهێنەران تەنها ئەوە دەبینن کە پێویستیانە - نە زیاتر نە کەمتر |
| **سادەیی** | ڕۆڵەکان جارێک بەڕێوەببە، بۆ زۆرێک لە بەکارهێنەران جێبەجێی بکە |
| **ڕێکەوتن** | تۆماری چاودێری ڕوون بۆ کێ دەتوانێت چی بکات |
| **نەرمی** | ڕۆڵی تایبەت دروست بکە بۆ پێداویستییەکانی کارەکەت |
| **سێ زمان** | ناوی ڕۆڵەکان بە ئینگلیزی و عەرەبی و کوردی |

### کێشەکانی کە چارەسەر دەکات

- **"کاشێرەکانم داتای ژمێریاری دەبینن"** - سنووردارکردنی دەستگەیشتن بەپێی ڕۆڵ
- **"هەمووان دەسەڵاتی بەڕێوەبەریان هەیە"** - دروستکردنی ڕۆڵی سنووردار بۆ هەر کارێک
- **"ناتوانم بەدواداچوون بکەم کێ چی گۆڕیوە"** - دەسەڵاتەکان بەرپرسیاریەتی دروست دەکەن
- **"دامەزراندنی کارمەندی نوێ کاتی زۆر دەوێت"** - ڕۆڵێک دیاری بکە و تەواو

---

## کێ دەبێت ئەمە بخوێنێت؟

| ڕۆڵ | بۆچی ئەمە بخوێنیت |
|------|-------------------|
| **بەڕێوەبەرانی سیستەم** | تۆ بەکارهێنەران و ئاسایش بەڕێوە دەبەیت |
| **خاوەنانی کار** | تۆ بڕیار دەدەیت کێ دەسەڵاتی چی هەیە |
| **کارمەندانی IT** | تۆ سیاسەتەکانی ئاسایش جێبەجێ دەکەیت |
| **گەشەپێدەران** | پێویستت بە پشکنینی دەسەڵاتەکانە لە کۆد |

---

## حاڵەتەکانی بەکارهێنان

### حاڵەتی بەکارهێنان ١: فرۆشگای تاکە لەگەڵ چەند کاشێرێک

**سیناریۆ:** ٥ کاشێرت هەیە و ٢ بەڕێوەبەر. کاشێرەکان دەبێت تەنها فرۆشتن بکەن، کاتێک بەڕێوەبەران دەتوانن گەڕاندنەوە ئەنجام بدەن و ڕاپۆرتەکان ببینن.

**چارەسەر:**
1. ڕۆڵی `کاشێر`ی ئامادەکراو بەکاربهێنە بۆ کاشێرەکان (تەنها POS)
2. ڕۆڵی `بەڕێوەبەر`ی ئامادەکراو بەکاربهێنە بۆ بەڕێوەبەران (POS + ڕاپۆرت + ژمێریاری سنووردار)
3. کاتی دروستکردنی هەژمارەکانی بەکارهێنەر ڕۆڵەکان دیاری بکە

**سوود:** کاشێرەکان ناتوانن بە هەڵە فرۆشتن هەڵوەشێننەوە یان دەستیان بگات بە ڕاپۆرتە هەستیارەکان.

---

### حاڵەتی بەکارهێنان ٢: دەستگەیشتنی تیمی ژمێریاری

**سیناریۆ:** ژمێریارەکەت پێویستی بە دەستگەیشتنی تەواو هەیە بۆ داتای دارایی بەڵام نابێت هیچ فرۆشتنێک بکات.

**چارەسەر:**
1. ڕۆڵی `ژمێریار`ی ئامادەکراو بەکاربهێنە
2. ئەم ڕۆڵە دەستگەیشتنی تەواوی هەیە بۆ ژمێریاری بەڵام بێ دەسەڵاتی POS

**سوود:** جیاکردنەوەی ئەرکەکان - فرۆشتن و دارایی سەربەخۆن.

---

### حاڵەتی بەکارهێنان ٣: کارمەندانی کۆگا

**سیناریۆ:** کرێکارانی کۆگا پێویستیان بە بەڕێوەبردنی کۆگا هەیە بەڵام نابێت داتای فرۆشتن یان دارایی ببینن.

**چارەسەر:**
1. ڕۆڵی `کارمەندی کۆگا`ی ئامادەکراو بەکاربهێنە
2. ئەم ڕۆڵە تەنها دەتوانێت کارەکانی کۆگا بکات

**سوود:** کارەکانی کۆگا تێکەڵ نابن لەگەڵ فرۆشتن یان ژمێریاری.

---

### حاڵەتی بەکارهێنان ٤: ڕۆڵی تایبەت بۆ سەرپەرشتیار

**سیناریۆ:** پێویستت بە سەرپەرشتیاری شەفت هەیە کە بتوانێت گەڕاندنەوە بکات بەڵام ڕاپۆرت نەبینێت.

**چارەسەر:**
1. ڕۆڵی نوێی تایبەت دروست بکە بە ناوی "سەرپەرشتیاری شەفت"
2. تەنها دەسەڵاتە پێویستەکان هەڵبژێرە: `pos.access`، `pos.sell`، `pos.refund`
3. بیدە بە بەکارهێنەرانی سەرپەرشتیار

**سوود:** کۆنترۆڵی ورد لەسەر ئەوەی هەر پۆستێک دەتوانێت چی بکات.

---

## تایبەتمەندییەکان

### تایبەتمەندی ١: ڕۆڵە ئامادەکراوەکان

**چی دەکات:** GoPOS لەگەڵ ٧ ڕۆڵی ئامادەکراو دێت کە زۆربەی پێداویستییەکانی کار دەگرنەوە.

**کەی بەکاری بهێنە:** ئەمانە وەک خۆیان بەکاربهێنە بۆ دانانی کاری ستاندارد، یان وەک قاڵب بۆ ڕۆڵە تایبەتەکان.

**ڕۆڵە ئامادەکراوەکان:**

| ڕۆڵ | باشترینە بۆ | چی دەتوانن بکەن |
|------|-------------|-----------------|
| **سەرپەرشتیاری باڵا** | خاوەنانی کار، بەڕێوەبەرانی IT | هەموو شتێک - دەستگەیشتنی تەواو |
| **بەڕێوەبەر** | بەڕێوەبەرانی فرۆشگا، سەرپەرشتیارەکان | POS، کۆگا، ڕاپۆرت، ژمێریاری سنووردار |
| **ژمێریار** | کارمەندانی دارایی | دەستگەیشتنی تەواوی ژمێریاری و دارایی |
| **کاشێر** | کارمەندانی فرۆشتن | تەنها کارەکانی POS |
| **کارمەندی کۆگا** | کرێکارانی کۆگا | تەنها بەڕێوەبردنی کۆگا |
| **بەڕێوەبەری HR** | سەرۆکی بەشی HR | دەستگەیشتنی تەواوی HR |
| **کارمەندی HR** | یاریدەدەرانی HR | HR ی سنووردار (ئامادەبوون، مۆڵەت) |

**چۆن ڕۆڵە ئامادەکراوەکان ببینیت:**
1. بڕۆ بۆ **ڕێکخستنەکان > ڕۆڵەکان**
2. هەموو ڕۆڵەکان لەگەڵ ژمارەی دەسەڵاتەکانیان ببینە
3. کلیک لەسەر هەر ڕۆڵێک بکە بۆ بینینی دەسەڵاتەکانی

---

### تایبەتمەندی ٢: دەسەڵاتەکان بەپێی مۆدیوڵ

**چی دەکات:** دەسەڵاتەکان بەپێی مۆدیوڵ ڕێکخراون، کە ئاسانی دەکات دەستگەیشتن بدەیت بە بەشی تایبەت.

**کەی بەکاری بهێنە:** کاتی دروستکردنی ڕۆڵی تایبەت یان پێداچوونەوەی ئەوەی هەر ڕۆڵێک دەتوانێت چی بکات.

**مۆدیولە بەردەستەکان:**

#### دەسەڵاتەکانی POS
| دەسەڵات | چی ڕێگا دەدات | ڕۆڵە باوەکان |
|---------|---------------|--------------|
| `pos.access` | کردنەوەی ڕووکاری POS | کاشێر، بەڕێوەبەر |
| `pos.sell` | ئەنجامدانی فرۆشتن | کاشێر، بەڕێوەبەر |
| `pos.refund` | ئەنجامدانی گەڕاندنەوە | بەڕێوەبەر |
| `pos.discount` | جێبەجێکردنی داشکاندن | بەڕێوەبەر |
| `pos.hold` | هەڵگرتن/بانگکردنەوەی فرۆشتن | کاشێر، بەڕێوەبەر |
| `pos.reports` | بینینی ڕاپۆرتەکانی POS | بەڕێوەبەر |

#### دەسەڵاتەکانی کۆگا
| دەسەڵات | چی ڕێگا دەدات | ڕۆڵە باوەکان |
|---------|---------------|--------------|
| `inventory.view` | بینینی کۆگا | کارمەندی کۆگا، بەڕێوەبەر |
| `inventory.create` | زیادکردنی کاڵا | کارمەندی کۆگا |
| `inventory.edit` | دەستکاریکردنی کاڵا | کارمەندی کۆگا |
| `inventory.delete` | سڕینەوەی کاڵا | بەڕێوەبەر |
| `inventory.adjust` | ڕێکخستنی بڕی کۆگا | کارمەندی کۆگا |
| `inventory.transfer` | گواستنەوە لەنێوان کۆگاکان | کارمەندی کۆگا |

#### دەسەڵاتەکانی فرۆشتن
| دەسەڵات | چی ڕێگا دەدات | ڕۆڵە باوەکان |
|---------|---------------|--------------|
| `sales.view` | بینینی مێژووی فرۆشتن | بەڕێوەبەر، ژمێریار |
| `sales.create` | دروستکردنی فرۆشتن | کاشێر، بەڕێوەبەر |
| `sales.edit` | دەستکاریکردنی فرۆشتن | بەڕێوەبەر |
| `sales.delete` | سڕینەوەی فرۆشتن | سەرپەرشتیاری باڵا |
| `sales.export` | هەناردەکردنی داتای فرۆشتن | بەڕێوەبەر، ژمێریار |

#### دەسەڵاتەکانی کڕین
| دەسەڵات | چی ڕێگا دەدات | ڕۆڵە باوەکان |
|---------|---------------|--------------|
| `purchases.view` | بینینی کڕینەکان | کارمەندی کۆگا، بەڕێوەبەر |
| `purchases.create` | دروستکردنی داواکاری کڕین | کارمەندی کۆگا |
| `purchases.edit` | دەستکاریکردنی کڕینەکان | بەڕێوەبەر |
| `purchases.delete` | سڕینەوەی کڕینەکان | سەرپەرشتیاری باڵا |
| `purchases.approve` | پەسەندکردنی کڕینەکان | بەڕێوەبەر |

#### دەسەڵاتەکانی کڕیار
| دەسەڵات | چی ڕێگا دەدات | ڕۆڵە باوەکان |
|---------|---------------|--------------|
| `customers.view` | بینینی لیستی کڕیاران | کاشێر، بەڕێوەبەر |
| `customers.create` | زیادکردنی کڕیار | کاشێر، بەڕێوەبەر |
| `customers.edit` | دەستکاریکردنی زانیاری کڕیار | بەڕێوەبەر |
| `customers.delete` | سڕینەوەی کڕیاران | بەڕێوەبەر |
| `customers.credit` | بەڕێوەبردنی قەرزی کڕیار | بەڕێوەبەر، ژمێریار |

#### دەسەڵاتەکانی دابینکەر
| دەسەڵات | چی ڕێگا دەدات | ڕۆڵە باوەکان |
|---------|---------------|--------------|
| `suppliers.view` | بینینی لیستی دابینکەران | کارمەندی کۆگا |
| `suppliers.create` | زیادکردنی دابینکەر | بەڕێوەبەر |
| `suppliers.edit` | دەستکاریکردنی دابینکەران | بەڕێوەبەر |
| `suppliers.delete` | سڕینەوەی دابینکەران | سەرپەرشتیاری باڵا |

#### دەسەڵاتەکانی ژمێریاری
| دەسەڵات | چی ڕێگا دەدات | ڕۆڵە باوەکان |
|---------|---------------|--------------|
| `accounting.view` | بینینی داتای ژمێریاری | ژمێریار |
| `accounting.entries` | دروستکردنی تۆمارەکانی ڕۆژنامچە | ژمێریار |
| `accounting.approve` | پەسەندکردنی تۆمارەکان | ژمێریار، بەڕێوەبەر |
| `accounting.reports` | بینینی ڕاپۆرتە داراییەکان | ژمێریار، بەڕێوەبەر |
| `accounting.settings` | بەڕێوەبردنی چارتی هەژمارەکان | ژمێریار |
| `accounting.close_period` | داخستنی ماوە داراییەکان | ژمێریار |

#### دەسەڵاتەکانی HR
| دەسەڵات | چی ڕێگا دەدات | ڕۆڵە باوەکان |
|---------|---------------|--------------|
| `hr.view` | بینینی داتای HR | کارمەندی HR، بەڕێوەبەر |
| `hr.employees` | بەڕێوەبردنی کارمەندان | بەڕێوەبەری HR |
| `hr.payroll` | پرۆسەکردنی مووچە | بەڕێوەبەری HR |
| `hr.attendance` | بەڕێوەبردنی ئامادەبوون | کارمەندی HR |
| `hr.leave` | بەڕێوەبردنی داواکارییەکانی مۆڵەت | کارمەندی HR |
| `hr.reports` | بینینی ڕاپۆرتەکانی HR | بەڕێوەبەری HR |

#### دەسەڵاتەکانی ڕاپۆرت
| دەسەڵات | چی ڕێگا دەدات | ڕۆڵە باوەکان |
|---------|---------------|--------------|
| `reports.sales` | بینینی ڕاپۆرتی فرۆشتن | بەڕێوەبەر |
| `reports.purchases` | بینینی ڕاپۆرتی کڕین | بەڕێوەبەر |
| `reports.inventory` | بینینی ڕاپۆرتی کۆگا | کارمەندی کۆگا، بەڕێوەبەر |
| `reports.financial` | بینینی ڕاپۆرتی دارایی | ژمێریار |
| `reports.hr` | بینینی ڕاپۆرتی HR | بەڕێوەبەری HR |
| `reports.export` | هەناردەکردنی هەر ڕاپۆرتێک | بەڕێوەبەر |

#### دەسەڵاتەکانی ڕێکخستنەکان
| دەسەڵات | چی ڕێگا دەدات | ڕۆڵە باوەکان |
|---------|---------------|--------------|
| `settings.general` | ڕێکخستنەکانی گشتی | سەرپەرشتیاری باڵا |
| `settings.users` | بەڕێوەبردنی بەکارهێنەر | سەرپەرشتیاری باڵا |
| `settings.roles` | بەڕێوەبردنی ڕۆڵ | سەرپەرشتیاری باڵا |
| `settings.company` | ڕێکخستنەکانی کۆمپانیا | سەرپەرشتیاری باڵا |
| `settings.integrations` | ڕێکخستنەکانی تێکەڵبوون | سەرپەرشتیاری باڵا |
| `settings.backup` | پاشکەوتکردن و گەڕاندنەوە | سەرپەرشتیاری باڵا |

---

### تایبەتمەندی ٣: دروستکردنی ڕۆڵی تایبەت

**چی دەکات:** دروستکردنی ڕۆڵ تایبەت بە پێداویستییەکانی کارەکەت.

**کەی بەکاری بهێنە:** کاتێک ڕۆڵە ئامادەکراوەکان لەگەڵ داواکارییەکانت نایەنەوە.

**چۆن ڕۆڵی تایبەت دروست بکەیت:**

1. بڕۆ بۆ **ڕێکخستنەکان > ڕۆڵەکان**
2. کلیک لەسەر **دروستکردنی ڕۆڵ** بکە
3. وردەکارییەکان پڕ بکەوە:
   - **ناو (ئینگلیزی):** پێویستە - بۆ نموونە: "Shift Supervisor"
   - **ناو (عەرەبی):** بژاردەیی - بۆ نموونە: "مشرف الوردية"
   - **ناو (کوردی):** بژاردەیی - بۆ نموونە: "سەرپەرشتیاری شەفت"
   - **وەسف:** ئەم ڕۆڵە بۆ چییە
4. دەسەڵاتەکانی کە ئەم ڕۆڵە پێویستی پێیانە هەڵبژێرە (کۆمەڵکراو بەپێی مۆدیوڵ)
5. کلیک لەسەر **دروستکردن** بکە

**نموونەی کار:**

دروستکردنی ڕۆڵی "کاشێری پێشکەوتوو":
- دەتوانێت هەموو ئەوەی کاشێر دەیکات بکات
- هەروەها: داشکاندن جێبەجێ بکات (`pos.discount`)
- هەروەها: ڕاپۆرتی فرۆشتنی ڕۆژانە ببینێت (`reports.sales`)

---

### تایبەتمەندی ٤: دیاریکردنی ڕۆڵ

**چی دەکات:** بەستنەوەی بەکارهێنەران بە ڕۆڵەکانیان.

**کەی بەکاری بهێنە:** کاتی دروستکردنی بەکارهێنەری نوێ یان گۆڕینی بەرپرسیارێتی کەسێک.

**چۆن ڕۆڵ دیاری بکەیت (لە ڕووکار):**

1. بڕۆ بۆ **ڕێکخستنەکان > بەکارهێنەران**
2. بەکارهێنەری نوێ دروست بکە یان یەکێکی بەردەست دەستکاری بکە
3. لە بەشی **ڕۆڵەکان**، یەک یان زیاتر ڕۆڵ هەڵبژێرە
4. بەکارهێنەرەکە پاشکەوت بکە

**چۆن ڕۆڵ دابنێیت (لە کۆد):**

```php
use App\Models\User;
use App\Models\Role;

// بەکارهێنەرەکە بهێنە
$user = User::find(1);

// ڕۆڵێک بە ناو دابنێ
$user->assignRole('manager');

// چەند ڕۆڵ دابنێ
$user->assignRole(['manager', 'accountant']);

// بە مۆدێلی ڕۆڵ
$role = Role::findByName('cashier');
$user->assignRole($role);
```

**نموونەی کار:**

ئەحمەد وەک کاشێر دەستپێدەکات، دواتر پلەی بەرز دەبێتەوە:
1. لە سەرەتا: ڕۆڵی `کاشێر` دابنێ
2. دوای بەرزبوونەوەی پلە: ڕۆڵی `بەڕێوەبەر` زیاد بکە (ئێستا هەردووکی هەیە)
3. یان: `کاشێر` بسڕەوە، `بەڕێوەبەر` زیاد بکە (گۆڕینی ڕۆڵ)

---

### تایبەتمەندی ٥: پشکنینی دەسەڵات

**چی دەکات:** دڵنیابوونەوە کە بەکارهێنەران دەستگەیشتنی پێویستیان هەیە پێش ڕێگادان بە ئەنجامدانی کردارێک.

**کەی بەکاری بهێنە:** لە کۆد، قاڵبەکان، و تایبەتمەندییە تایبەتەکان.

**چۆن دەسەڵاتەکان لە PHP پشکنین بکەیت:**

```php
// بپشکنە ئایا بەکارهێنەر ڕۆڵی تایبەتی هەیە
if ($user->hasRole('manager')) {
    // تایبەتمەندییەکانی بەڕێوەبەر نیشان بدە
}

// بپشکنە ئایا بەکارهێنەر هەر یەکێک لەم ڕۆڵانەی هەیە
if ($user->hasRole(['manager', 'accountant'])) {
    // تایبەتمەندی بۆ بەڕێوەبەران یان ژمێریاران نیشان بدە
}

// بپشکنە ئایا بەکارهێنەر دەسەڵاتی تایبەتی هەیە
if ($user->hasPermission('pos.refund')) {
    // دوگمەی گەڕاندنەوە نیشان بدە
}

// بپشکنە ئایا بەکارهێنەر هەموو ئەم دەسەڵاتانەی هەیە
if ($user->hasAllPermissions(['pos.sell', 'pos.refund'])) {
    // بەکارهێنەر دەتوانێت بفرۆشێت و بگەڕێنێتەوە
}

// هەموو دەسەڵاتەکانی بەکارهێنەر بهێنە
$permissions = $user->getAllPermissions();
```

**چۆن دەسەڵاتەکان لە قاڵبەکانی Blade پشکنین بکەیت:**

```blade
@if(auth()->user()->hasRole('manager'))
    <a href="/reports">بینینی ڕاپۆرتەکان</a>
@endif

@if(auth()->user()->hasPermission('pos.discount'))
    <button>جێبەجێکردنی داشکاندن</button>
@endif
```

**چۆن لە سەرچاوەکانی Filament پشکنین بکەیت:**

```php
public static function canViewAny(): bool
{
    return auth()->user()->hasPermission('sales.view');
}

public static function canCreate(): bool
{
    return auth()->user()->hasPermission('sales.create');
}

public static function canEdit(Model $record): bool
{
    return auth()->user()->hasPermission('sales.edit');
}

public static function canDelete(Model $record): bool
{
    return auth()->user()->hasPermission('sales.delete');
}
```

---

## باشترین ڕەوشتەکان

### بکە

| ڕەوشت | بۆچی |
|-------|-----|
| لەگەڵ ڕۆڵە ئامادەکراوەکان دەستپێبکە | زۆربەی سیناریۆ باوەکان دەگرنەوە |
| کەمترین دەسەڵات بەکاربهێنە | کەمترین دەسەڵاتی پێویست بدە |
| ڕۆڵەکان هەر سێ مانگ جارێک پێداچوونەوە بکە | بەرپرسیارێتییەکانی کار دەگۆڕێن |
| ڕۆڵە تایبەتەکان دۆکیومێنت بکە | بۆ ئەوەی کەسانی تر مەبەستیان تێبگەن |
| دوای گۆڕانکارییەکان تاقی بکەرەوە | دڵنیابەوە بەکارهێنەران دەتوانن کاریان بکەن |

### مەکە

| دووری لێ بکەوە | بۆچی |
|----------------|-----|
| دانی ڕۆڵی سەرپەرشتیاری باڵا بە هەمووان | مەبەستی RBAC بێمانا دەکات |
| ڕۆڵی تایبەتی زۆر | سەختە بۆ پاراستن - ئامادەکراوەکان بەکاربهێنە کاتێک دەکرێت |
| زیادبوونی دەسەڵات | دەسەڵاتەکان بسڕەوە کاتێک پێویست نین |
| هاوبەشکردنی هەژمار | هەر بەکارهێنەرێک دەبێت هەژماری خۆی هەبێت |

---

## سەرچاوەی تەکنیکی

### سەرچاوەی API

#### مۆدێلی ڕۆڵ

```php
use App\Models\Role;

// دۆزینەوە بە ناو
$role = Role::findByName('manager');

// ناوی وەرگێڕاو بهێنە (بەپێی زمانی ئێستا)
$name = $role->localizedName;

// هەموو دەسەڵاتەکانی ئەم ڕۆڵە بهێنە
$permissions = $role->permissions;

// بپشکنە ئایا ڕۆڵی سیستەمە (ناسڕێتەوە)
if ($role->is_system) {
    // ڕۆڵی پارێزراو
}
```

#### مۆدێلی دەسەڵات

```php
use App\Models\Permission;

// دۆزینەوە بە ناو
$permission = Permission::findByName('pos.sell');

// بهێنە بەپێی مۆدیوڵ
$posPermissions = Permission::where('module', 'pos')->get();

// ناوی وەرگێڕاو بهێنە
$name = $permission->localizedName;
```

#### خزمەتگوزاری دەسەڵات

```php
use App\Services\PermissionService;

$service = new PermissionService();

// هەموو دەسەڵاتەکان لەگەڵ وەرگێڕانەکان بهێنە
$permissions = $service->getAllPermissions();

// دانانی دەسەڵاتەکان (جارێک کاتی دامەزراندن)
$service->seedPermissions();

// دانانی ڕۆڵە ئامادەکراوەکان
$service->seedDefaultRoles();
```

### نەخشەی داتابەیس

#### خشتەی ڕۆڵەکان

| ستوون | جۆر | وەسف |
|-------|-----|------|
| id | bigint | کلیلی سەرەکی |
| name | string | کۆدی تایبەتی ڕۆڵ (وەک 'manager') |
| name_ar | string | ناوی نیشاندان بە عەرەبی |
| name_ckb | string | ناوی نیشاندان بە کوردی |
| description | text | وەسفی ڕۆڵ |
| description_ar | text | وەسف بە عەرەبی |
| description_ckb | text | وەسف بە کوردی |
| is_system | boolean | ئەگەر ڕاست بێت، ناسڕێتەوە |
| created_at | timestamp | کەی دروستکراوە |
| updated_at | timestamp | دوایین دەستکاری |

#### خشتەی دەسەڵاتەکان

| ستوون | جۆر | وەسف |
|-------|-----|------|
| id | bigint | کلیلی سەرەکی |
| name | string | کۆدی تایبەتی دەسەڵات (وەک 'pos.sell') |
| name_ar | string | ناوی نیشاندان بە عەرەبی |
| name_ckb | string | ناوی نیشاندان بە کوردی |
| description | text | ئەم دەسەڵاتە چی ڕێگا دەدات |
| description_ar | text | وەسف بە عەرەبی |
| description_ckb | text | وەسف بە کوردی |
| module | string | کۆمەڵکردنی مۆدیوڵ (pos، sales، هتد.) |
| created_at | timestamp | کەی دروستکراوە |
| updated_at | timestamp | دوایین دەستکاری |

#### خشتەی دەسەڵاتەکانی ڕۆڵ

| ستوون | جۆر | وەسف |
|-------|-----|------|
| role_id | bigint | کلیلی دەرەکی بۆ ڕۆڵەکان |
| permission_id | bigint | کلیلی دەرەکی بۆ دەسەڵاتەکان |

#### خشتەی ڕۆڵەکانی مۆدێل

| ستوون | جۆر | وەسف |
|-------|-----|------|
| role_id | bigint | کلیلی دەرەکی بۆ ڕۆڵەکان |
| model_type | string | هەمیشە 'App\Models\User' |
| model_id | bigint | ناسنامەی بەکارهێنەر |

---

## چارەسەرکردنی کێشە

### بەکارهێنەر ڕۆڵی هەیە بەڵام ناتوانێت دەستی بگات بە تایبەتمەندی

**کێشە:** بەکارهێنەر ڕۆڵی پێدراوە بەڵام هێشتا ناتوانێت شتێک ببینێت/بکات.

**چارەسەرەکان:**
1. دڵنیابەوە ڕۆڵ دەسەڵاتی پێویستی هەیە (ڕێکخستنەکان > ڕۆڵەکان > دەستکاری ڕۆڵ)
2. بپشکنە ئایا پشکنینی دەسەڵات بە دروستی لە کۆد جێبەجێ کراوە
3. کاشی بەرنامەکە پاک بکەوە: `php artisan optimize:clear`
4. دڵنیابەوە دانیشتنی بەکارهێنەر نوێکراوەتەوە (دەرچوون و گەڕانەوە)

---

### دەسەڵات لە لیستەکەدا نیشان نادرێت

**کێشە:** دەسەڵاتێک کە پێویستتە بوونی نییە.

**چارەسەرەکان:**
1. بذەری دەسەڵات بڕەوانە:
   ```bash
   php artisan db:seed --class=RolesAndPermissionsSeeder
   ```
2. `PermissionService` بپشکنە بۆ پێناسەی دەسەڵات
3. دەسەڵاتەکە زیاد بکە ئەگەر بۆ تایبەتمەندی تایبەتە

---

### ناتوانم ڕۆڵ بسڕمەوە

**کێشە:** دوگمەی سڕینەوە ناچالاکە یان سڕینەوە شکست دەخوات.

**چارەسەر:** ڕۆڵەکە وەک ڕۆڵی سیستەم نیشانکراوە (`is_system = true`). ڕۆڵەکانی سیستەم پارێزراون و ناسڕێنەوە بۆ ڕێگری لە کێشەی ئاسایشی ڕێکەوت.

**چارەسەری تر:** ڕۆڵەکە دەستکاری بکە بۆ لابردنی دەسەڵاتە نەخوازراوەکان لە جیاتی سڕینەوەی.

---

### گۆڕانکارییەکانی دەسەڵات کار ناکەن

**کێشە:** دوای گۆڕینی دەسەڵاتەکانی ڕۆڵ، بەکارهێنەران هێشتا دەستگەیشتنی کۆنیان هەیە.

**چارەسەرەکان:**
1. کاش پاک بکەوە: `php artisan optimize:clear`
2. داوا لە بەکارهێنەران بکە دەربچن و بگەڕێنەوە
3. بپشکنە ئایا بەکارهێنەر چەند ڕۆڵی هەیە (دەسەڵاتەکان تێکەڵ دەکرێن)

---

*دوایین نوێکردنەوە: کانوونی دووەم ٢٠٢٦*
