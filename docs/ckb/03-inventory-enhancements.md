# مۆدیوڵی بەڕێوەبردنی کۆگا

## پوختە

مۆدیوڵی کۆگا کۆنترۆڵی ئاستی دامەزراوەیی بەسەر کۆگادا دابین دەکات لە چەند کۆگایەک. کاڵاکان بەپێی ژمارەی دەستە (Batch) بەدواداچوون بکە، ژمارە زنجیرەکان لەگەڵ گەرەنتی بەڕێوەببە، کۆگا لەنێوان شوێنەکان بگوازەوە، و ژماردنی فیزیکی کۆگا ئەنجام بدە - هەموو لەگەڵ شوێنی پشکنینی تەواو.

---

## بۆچی ئەم تایبەتمەندییانە بەکاربهێنیت؟

### سوودە سەرەکییەکان

| سوود | چۆن یارمەتی کارەکەت دەدات |
|------|--------------------------|
| **کۆنترۆڵی چەند شوێن** | بەدواداچوونی کۆگا لە هەموو کۆگاکانت |
| **توانای بەدواداچوونی کاڵا** | بزانە بە تەواوی هەر کاڵایەک لە کوێوە هاتووە (دەستە/زنجیرە) |
| **بەڕێوەبردنی بەسەرچوون** | هیچکات کاڵای بەسەرچوو مەفرۆشە |
| **وردی تێچوو** | ڕێگەی تێچووی زۆر بۆ وردی دارایی |
| **ڕێگری لە لەدەستدان** | ژماردنی بەردەوام کێشەکان زوو دەدۆزێتەوە |
| **خۆکار** | یاساکانی داواکردنەوە ڕێگری لە کۆتاییهاتنی کۆگا دەکەن |

### کێشەکانی کە چارەسەر دەکات

- **"نازانم کام کۆگا کاڵای تیایە"** - کۆگا لە کاتی ڕاستەقینە بەپێی شوێن
- **"کڕیار کاڵای بەسەرچووی گەڕاندۆتەوە"** - بەدواداچوونی دەستە لەگەڵ بەرواری بەسەرچوون
- **"داواکاری گەرەنتی کابووسە"** - بەدواداچوونی زنجیرە لەگەڵ بەرواری گەرەنتی
- **"ژمارەی کۆگا هیچکات هاوتا نین"** - شیکارکردنی جیاوازی و ڕێکخستنەکان
- **"هەمیشە کاڵا باوەکان تەواو دەبن"** - ئاگاداری داواکردنەوەی خۆکار
- **"گواستنەوەی کۆگا لەنێوان فرۆشگاکان شپرزەیە"** - پرۆسەی گواستنەوەی فەرمی لەگەڵ پەسەندکردن

---

## کێ دەبێت ئەمە بخوێنێت؟

| ڕۆڵ | بەشە پەیوەندیدارەکان |
|------|---------------------|
| **کارمەندانی کۆگا** | هەموو بەشەکان |
| **بەڕێوەبەرانی کۆگا** | هەموو بەشەکان + ڕێگەکانی تێچوو |
| **بەڕێوەبەرانی فرۆشگا** | چەند کۆگا، گواستنەوەی کۆگا |
| **تیمی دارایی** | ڕێگەکانی تێچوو، هەڵسەنگاندنی کۆگا |
| **گەشەپێدەران** | بەشەکانی سەرچاوەی تەکنیکی |

---

## پێکهاتەکانی مۆدیوڵ

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        بەڕێوەبردنی کۆگا                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌────────────────────┐   بەدواداچوونی کۆگا لە چەند شوێن               │
│  │   چەند کۆگا        │   بەکاربهێنە کات: زیاتر لە یەک فرۆشگات هەیە    │
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   پۆلێنکردنی کاڵا بەپێی دەستە لەگەڵ بەسەرچوون  │
│  │  بەدواداچوونی دەستە  │   بەکاربهێنە کات: کاڵا بەسەردەچن (خواردن، دەرمان)│
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   بەدواداچوونی یەکەی تاک بە ژمارەی زنجیرە      │
│  │ بەدواداچوونی زنجیرە│   بەکاربهێنە کات: کاڵای گرانبها یان گەرەنتی     │
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   گواستنەوەی کۆگا لەنێوان کۆگاکان              │
│  │  گواستنەوەی کۆگا  │   بەکاربهێنە کات: هاوسەنگکردنەوەی کۆگا         │
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   ژماردنی فیزیکی لەگەڵ ڕێکخستنی جیاوازی        │
│  │  ژماردنی کۆگا     │   بەکاربهێنە کات: پشکنینی مانگانە/ساڵانە       │
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   FIFO، LIFO، AVCO، دیاریکراو                   │
│  │  ڕێگەکانی تێچوو   │   بەکاربهێنە کات: پێداویستییەکانی ڕاپۆرتی دارایی│
│  └────────────────────┘                                                 │
│                                                                         │
│  ┌────────────────────┐   ئاگاداری کۆگای نزم بە شێوەی خۆکار            │
│  │ یاساکانی داواکردنەوە│   بەکاربهێنە کات: ڕێگری لە تەواوبوون          │
│  └────────────────────┘                                                 │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## تایبەتمەندی ١: بەڕێوەبردنی چەند کۆگا

### چییە؟

بەڕێوەبردنی چەند کۆگا ڕێگات دەدات کۆگا جیاجیا بەدواداچوون بکەیت لە هەر شوێنێکی فیزیکی (کۆگاکان، فرۆشگاکان، ناوەندەکانی دابەشکردن). هەر شوێنێک ئاستی کۆگای خۆی هەیە، و دەتوانیت کۆی کۆگا لە هەموو شوێنەکان ببینیت.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **بینینەوە** | زانینی ئاستی کۆگا لە هەر شوێن لە کاتی خۆی |
| **دابەشکردن** | فرۆشتن لە شوێنی دروست |
| **پلان** | ناسینی کام شوێن پێویستی بە پڕکردنەوە هەیە |
| **ڕێکخستن** | شوێنی ڕەفە لەناو کۆگاکان بۆ هەڵگرتنی ئاسان |
| **نەرمی** | هەر کۆگایەک دەتوانێت یاسای جیاوازی هەبێت |

### حاڵەتی بەکارهێنان: زنجیرەی تاکفرۆشی لەگەڵ کۆگای ناوەندی

**سیناریۆ:** ٣ فرۆشگای تاکفرۆشی + ١ کۆگای ناوەندی

**دانان:**
1. دروستکردنی "کۆگای سەرەکی" (سەرەکی، کە کڕینەکان دەگەن)
2. دروستکردنی کۆگاکانی "فرۆشگا ئەلف"، "فرۆشگا ب"، "فرۆشگا ج"
3. کڕینەکان لە کۆگای سەرەکی وەردەگیرێن
4. کۆگا دەگوازرێتەوە بۆ فرۆشگاکان بەپێی پێویست
5. هەر فرۆشگایەک لە کۆگای خۆی دەفرۆشێت

**سوودەکان:**
- بزانە بە تەواوی چی لە هەر شوێنەکە
- کۆگا بگوازەوە کاتێک یەک فرۆشگا کەم دەبێت
- کۆگای سەرەکی وەرگرتنی کۆ مامەڵە دەکات

### چۆن بەکاربهێنیت (هەنگاوەکانی ڕووکار)

#### دروستکردنی کۆگا

1. بڕۆ بۆ **کۆگا > کۆگاکان**
2. کلیک لەسەر **دروستکردنی کۆگا**
3. وردەکارییەکان پڕ بکەوە:
   - **ناو** (بە هەموو زمانەکان)
   - **کۆد** (ناسنامەی تایبەت وەک "WH-001")
   - **ناونیشان** و زانیاری پەیوەندی
   - **بەڕێوەبەر** (بژاردەیی)
   - **سەرەکییە** (کۆگای نوێ بەرەو کوێ دەچێت)
   - **ڕێگادان بە کۆگای نیگەتیڤ** (ناچالاک بکە بۆ ڕێگری لە فرۆشتنی زیادە)
4. کلیک لەسەر **دروستکردن**

### کۆد

```php
use App\Models\Warehouse;
use App\Models\WarehouseLocation;

// دروستکردنی کۆگا
$warehouse = Warehouse::create([
    'name' => 'Main Warehouse',
    'name_ar' => 'المستودع الرئيسي',
    'name_ckb' => 'کۆگای سەرەکی',
    'code' => 'WH-001',
    'address' => 'ناوچەی پیشەسازی ١٢٣',
    'is_default' => true,
    'allow_negative_stock' => false,
]);

// کۆگای سەرەکی بهێنە
$defaultWarehouse = Warehouse::getDefault();
```

### باشترین ڕەوشتەکان

| بکە | مەکە |
|-----|------|
| یەک کۆگا وەک سەرەکی دابنێ | هەموو کۆگاکان بەبێ سەرەکی بهێڵە |
| کۆدی شوێنی واتادار بەکاربهێنە | ناوی شوێنی ڕاستەوخۆ بەکاربهێنە |
| بەڕێوەبەر دابنێ بۆ کۆگاکان | کۆگاکان بەبێ بەڕێوەبەر بهێڵە |
| کۆگای نیگەتیڤ ناچالاک بکە بۆ تاکفرۆشی | کۆگای نیگەتیڤ بەبێ هۆکار ڕێگا پێ بدە |

---

## تایبەتمەندی ٢: بەدواداچوونی دەستە/لۆت

### چییە؟

بەدواداچوونی دەستە کاڵاکان کۆ دەکاتەوە بەپێی دەستەی بەرهەمهێنان یان ژمارەی لۆت. هەر دەستەیەک بەرواری دروستکردن و بەرواری بەسەرچوون و تێچووی خۆی هەیە. پێویستە بۆ خواردن، دەرمانسازی، و هەر کاڵایەک کە بەرواری بەسەرچوونی هەیە.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **توانای بەدواداچوون** | بزانە کام دەستە بە کام کڕیار فرۆشراوە |
| **کۆنترۆڵی بەسەرچوون** | دەستە کۆنەکان یەکەم بفرۆشە (FIFO) |
| **هێنانەوەکان** | خێرا دۆزینەوەی فرۆشتنە کاریگەرەکان ئەگەر دەستە کێشەی هەیە |
| **بەدواداچوونی تێچوو** | هەر دەستەیەک دەتوانێت تێچووی جیاواز هەبێت |
| **ڕێکەوتن** | پێویستە بۆ یاساکانی خواردن/دەرمان |

### چۆن بەکاربهێنیت (هەنگاوەکانی ڕووکار)

#### چالاککردنی بەدواداچوونی دەستە لەسەر کاڵا

1. کاڵاکە دەستکاری بکە
2. چالاک بکە **بەدواداچوونی دەستە**
3. ئەگەر کاڵا بەسەردەچێت:
   - چالاک بکە **بەسەرچوونی هەیە**
   - دابنێ **ڕۆژی ئاگاداری بەسەرچوون** (وەک ٣٠ ڕۆژ)
4. پاشکەوت بکە

#### تۆمارکردنی دەستەکان کاتی وەرگرتن

1. داواکاری کڕین دروست بکە
2. کاتی وەرگرتن، بۆ هەر کاڵایەکی بەدواداچوونکراو بە دەستە:
   - **ژمارەی دەستە** بنووسە
   - **بەرواری دروستکردن** بنووسە (بژاردەیی)
   - **بەرواری بەسەرچوون** بنووسە (ئەگەر جێبەجێ دەبێت)
3. وەرگرتن تەواو بکە

### کۆد

```php
use App\Models\ProductBatch;

// چالاککردنی بەدواداچوونی دەستە لەسەر کاڵا
$product->update([
    'track_batches' => true,
    'has_expiry' => true,
    'expiry_warning_days' => 30,
]);

// دروستکردنی دەستە
$batch = ProductBatch::create([
    'product_id' => $product->id,
    'warehouse_id' => $warehouse->id,
    'batch_number' => 'BATCH-2026-001',
    'manufacture_date' => '2026-01-01',
    'expiry_date' => '2027-01-01',
    'quantity' => 100,
    'unit_cost' => 25.50,
]);

// پشکنینی حاڵەتی بەسەرچوون
if ($batch->isExpired()) {
    // دەستەی بەسەرچوو مامەڵە بکە - مەیفرۆشە!
}
```

### باشترین ڕەوشتەکان

| بکە | مەکە |
|-----|------|
| ڕۆژی ئاگاداری ڕاستگۆ دابنێ | تا ڕۆژی کۆتایی چاوەڕوان بکە |
| دەستە بەسەرچووەکان هەفتانە پێداچوونەوە بکە | ڕاپۆرتەکانی بەسەرچوون پشتگوێ بخە |
| FIFO بفرۆشە (کۆنترین یەکەم) | بە ڕاستەوخۆ بفرۆشە |
| دورخستنەوەی کاڵای بەسەرچوو تۆمار بکە | بەبێ تۆمار دور بخەوە |

---

## تایبەتمەندی ٣: بەدواداچوونی ژمارەی زنجیرە

### چییە؟

بەدواداچوونی زنجیرە ناسنامەیەکی تایبەت دادەنێت بۆ هەر یەکەیەکی تاکی کاڵا. جیاواز لە دەستەکان (کۆمەڵی کاڵا)، هەر ژمارەی زنجیرە تەنها یەک کاڵای فیزیکی نوێنەرایەتی دەکات لەگەڵ گەرەنتی و حاڵەت و مێژووی خۆی.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **بەدواداچوونی تاک** | زانینی مێژووی هەر یەکەیەک |
| **بەڕێوەبردنی گەرەنتی** | بەدواداچوونی دەستپێک/کۆتایی گەرەنتی بۆ هەر یەکە |
| **مامەڵەکردن لەگەڵ گەڕاندنەوە** | پشتڕاستکردنەوەی گەڕاندنەوەی کڕیاران بە ژمارەی زنجیرە |
| **ڕێگری لە دزی** | ناتوانرێت کاڵا بگۆڕرێت بەبێ دۆزینەوە |
| **مێژووی خزمەتگوزاری** | بەدواداچوونی چاککردنەوە و گەڕاندنەوەکان |

### چۆن بەکاربهێنیت (هەنگاوەکانی ڕووکار)

#### چالاککردنی بەدواداچوونی زنجیرە لەسەر کاڵا

1. کاڵاکە دەستکاری بکە
2. چالاک بکە **بەدواداچوونی زنجیرە**
3. دابنێ **مانگەکانی گەرەنتی** (وەک ١٢)
4. پاشکەوت بکە

#### تۆمارکردنی ژمارە زنجیرەکان کاتی وەرگرتن

1. کڕین دروست بکە و کاڵاکان وەربگرە
2. بۆ کاڵاکانی بەدواداچوونکراو بە زنجیرە:
   - هەر ژمارەی زنجیرەیەک بسکان یان بنووسە
   - سیستەم تۆمارێک بۆ هەر یەکە دروست دەکات
   - هەموو ژمارە زنجیرەکان پەیوەست دەبن بەم کڕینە
3. وەرگرتن تەواو بکە

### کۆد

```php
use App\Models\ProductSerial;

// چالاککردنی بەدواداچوونی زنجیرە لەسەر کاڵا
$product->update([
    'track_serials' => true,
    'warranty_months' => 12,
]);

// دروستکردنی ژمارەی زنجیرە
$serial = ProductSerial::create([
    'product_id' => $product->id,
    'warehouse_id' => $warehouse->id,
    'serial_number' => 'SN-2026-00001',
    'status' => ProductSerial::STATUS_AVAILABLE,
    'cost' => 150.00,
    'warranty_start' => now(),
    'warranty_end' => now()->addMonths(12),
]);

// پشکنینی حاڵەتی گەرەنتی
if ($serial->isUnderWarranty()) {
    echo "گەرەنتی دروستە تا: " . $serial->warranty_end;
}
```

### باشترین ڕەوشتەکان

| بکە | مەکە |
|-----|------|
| ژمارە زنجیرەکان کاتی وەرگرتن بسکان | ژمارەکان بە دەست بنووسە |
| دڵنیابە ژمارەی زنجیرە لەگەڵ کاڵا دێت | گریمان بکە ژمارەکە دروستە |
| کارمەندان ڕاهێنان بکە سەر گرنگی ژمارەی زنجیرە | ژمارەی زنجیرە بۆ خێرایی تێپەڕێنە |
| ژمارەی زنجیرە بپشکنە پێش وەرگرتنی گەڕاندنەوە | گەڕاندنەوە بەبێ ژمارەی زنجیرە وەربگرە |

---

## تایبەتمەندی ٤: گواستنەوەی کۆگا

### چییە؟

گواستنەوەی کۆگا کاڵا دەگوازێتەوە لە یەک کۆگاوە بۆ یەکێکی تر لەگەڵ پرۆسەی پەسەندکردنی فەرمی. سیستەم بەدواداچوون دەکات چی داواکرا و نێردرا و وەرگیرا - لەگەڵ تۆمارکردنی جیاوازییەکان.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **پرۆسەی فەرمی** | بەرپرسیارێتی ڕوون بۆ جوڵەکان |
| **ڕەوتی کاری پەسەندکردن** | بەڕێوەبەران پەسەند دەکەن پێش گواستنەوە |
| **بەدواداچوونی جیاوازی** | بزانە ئایا بڕەکان هاوتا نین |
| **شوێنی پشکنین** | کێ چی گواستەوە، کەی |
| **پلانکردن** | بەروارەکانی گەیشتنی چاوەڕوانکراو |

### ڕەوتی کاری گواستنەوە

```
┌─────────┐    ┌─────────┐    ┌───────────┐    ┌──────────┐    ┌───────────┐
│ڕەشنووس │ →  │ چاوەڕوان│ →  │  لە ڕێگا  │ →  │  بەشیک   │ →  │  تەواو    │
└─────────┘    └─────────┘    └───────────┘    └──────────┘    └───────────┘
 دروستکردنی   لە چاوەڕوانی     کاڵاکان        هەندێک          هەموو کاڵا
 گواستنەوە     پەسەندکردن      نێردران      وەرگیران        وەرگیران
```

### چۆن بەکاربهێنیت (هەنگاوەکانی ڕووکار)

#### دروستکردنی داواکاری گواستنەوە

1. بڕۆ بۆ **کۆگا > گواستنەوەی کۆگا**
2. کلیک لەسەر **دروستکردنی گواستنەوە**
3. هەڵبژێرە:
   - **لە کۆگا** (سەرچاوە)
   - **بۆ کۆگا** (مەبەست)
   - **بەرواری چاوەڕوانکراو** (کەی دەبێت بگات)
4. کاڵاکان زیاد بکە:
   - کاڵا هەڵبژێرە
   - دەستە هەڵبژێرە (ئەگەر بە دەستە بەدواداچوون دەکرێت)
   - بڕ بنووسە
5. تێبینی زیاد بکە ئەگەر پێویست بوو
6. وەک **ڕەشنووس** پاشکەوت بکە یان بۆ پەسەندکردن بنێرە

#### پەسەندکردنی گواستنەوە

1. گواستنەوە چاوەڕوانەکان ببینە
2. کاڵاکان و بڕەکان پێداچوونەوە بکە
3. کلیک لەسەر **پەسەندکردن** یان **ڕەتکردنەوە**
4. ئەگەر پەسەندکرا، حاڵەت دەگۆڕێت بۆ **چاوەڕوان** ← **لە ڕێگا** کاتی نێردن

#### وەرگرتن

1. کاتێک کاڵاکان دەگەن بە مەبەست
2. گواستنەوەکە بکەوە
3. بۆ هەر کاڵایەک، **بڕی وەرگیراو** بنووسە
4. هەر جیاوازییەک تێبینی بکە
5. کلیک لەسەر **تەواوکردن**
6. کۆگا دەگوازرێتەوە بۆ کۆگای مەبەست

### کۆد

```php
use App\Models\StockTransfer;
use App\Services\InventoryService;

// دروستکردنی گواستنەوە
$transfer = StockTransfer::create([
    'from_warehouse_id' => $sourceWarehouse->id,
    'to_warehouse_id' => $destWarehouse->id,
    'transfer_date' => now(),
    'expected_date' => now()->addDays(2),
    'notes' => 'هاوسەنگکردنەوەی مانگانەی کۆگا',
]);

// تەواوکردنی گواستنەوە
$inventoryService = app(InventoryService::class);
$inventoryService->transferStock($transfer);
```

### باشترین ڕەوشتەکان

| بکە | مەکە |
|-----|------|
| بڕەکان کاتی وەرگرتن پشتڕاست بکەوە | بڕە نێردراوەکان کوێرانە متمانە پێ بکە |
| جیاوازییەکان بە تێبینی تۆمار بکە | کاڵای ونبوو پشتگوێ بخە |
| بەروارە چاوەڕوانکراوەکان بەکاربهێنە بۆ پلانکردن | بەروارەکان بەتاڵ بهێڵە |
| گواستنەوە پەسەند بکە پێش نێردن | بەبێ پەسەندکردن بنێرە |

---

## تایبەتمەندی ٥: ژماردنی کۆگا

### چییە؟

ژماردنی کۆگا (ژماردنی فیزیکی) بڕەکانی سیستەم بەراورد دەکات لەگەڵ بڕە ڕاستەقینەکانی لەبەردەست. سیستەم جیاوازییەکان حیساب دەکات و ڕێگا دەدات ڕێکخستنەکان تۆمار بکرێن بۆ چاککردنی کۆگا.

### سوودە سەرەکییەکان

| سوود | وەسف |
|------|------|
| **وردی** | دۆزینەوە و چاککردنی جیاوازییەکان |
| **دۆزینەوەی لەدەستدان** | ناسینی دزی یان کەمبوونەوە |
| **ڕێکەوتن** | پێویستە بۆ پشکنین |
| **وردی دارایی** | نرخی کۆگا لەگەڵ ڕاستی دێت |
| **بینینی کارپێکردن** | تێگەیشتن لە کوێ کێشەکان ڕوو دەدەن |

### جۆرەکانی ژماردن

| جۆری ژماردن | کەی | وەسف |
|-------------|-----|------|
| ژماردنی تەواو | ساڵانە | ژماردنی هەموو شتێک لە کۆگا |
| ژماردنی بەشیک | سێ مانگانە | ژماردنی پۆلی تایبەت |
| ژماردنی خولانەوەیی | هەفتانە/مانگانە | هەڵبژاردەی سووڕاو لە کاڵاکان |
| پشکنینی ڕاستەوخۆ | بەپێی پێویست | کاڵای ڕاستەوخۆ بۆ پشتڕاستکردنەوە |

### چۆن بەکاربهێنیت (هەنگاوەکانی ڕووکار)

#### دروستکردنی ژماردنی کۆگا

1. بڕۆ بۆ **کۆگا > ژماردنی کۆگا**
2. کلیک لەسەر **دروستکردنی ژماردن**
3. هەڵبژێرە:
   - **کۆگا** بۆ ژماردن
   - **جۆری ژماردن** (تەواو، بەشیک، خولانەوەیی)
   - **بەرواری ژماردن**
4. کلیک لەسەر **دەستپێکردن**
5. سیستەم کاڵاکانی ژماردن دروست دەکات لەگەڵ بڕەکانی سیستەمی ئێستا

#### ئەنجامدانی ژماردن

1. ژماردنی کۆگا بکەوە
2. کلیک لەسەر **دەستپێکردنی ژماردن**
3. بۆ هەر کاڵایەک:
   - بڕۆ بۆ شوێن
   - بڕی فیزیکی بژمێرە
   - لە بواری **بڕی ژمێراو** بنووسە
   - تێبینی زیاد بکە بۆ هەر کێشەیەک
4. سیستەم جیاوازی بە خۆکارانە حیساب دەکات

#### تۆمارکردنی ڕێکخستنەکان

1. کاتێک ڕازی بوویت بە وردی ژماردن
2. کلیک لەسەر **تۆمارکردنی ڕێکخستنەکان**
3. سیستەم جوڵەی کۆگا دروست دەکات بۆ جیاوازییەکان
4. ئاستەکانی کۆگا نوێ دەکرێنەوە بۆ هاوتابوون لەگەڵ بڕە ژمێراوەکان

### کۆد

```php
use App\Models\StockCount;
use App\Services\InventoryService;

$inventoryService = app(InventoryService::class);

// دروستکردنی ژماردنی کۆگا
$stockCount = StockCount::create([
    'warehouse_id' => $warehouse->id,
    'count_type' => 'full',
    'count_date' => now(),
    'status' => StockCount::STATUS_DRAFT,
]);

// دەستپێکردنی کاڵاکانی ژماردن لە کۆگای ئێستا
$inventoryService->initializeStockCount($stockCount);

// تۆمارکردنی ڕێکخستنەکان لە کۆگا
$inventoryService->postStockCountAdjustments($stockCount);
```

### باشترین ڕەوشتەکان

| بکە | مەکە |
|-----|------|
| لە کاتی هێمن بژمێرە | لە کاتی پڕی بژمێرە |
| وەرگرتن ڕابگرە لە کاتی ژماردن | نێردن وەربگرە لە کاتی ژماردن |
| کاڵای گرانبها دووجار بژمێرە | بە یەک ژماردن متمانە بکە |
| هەموو جیاوازییەکان بپشکنە | جیاوازی بچووک پشتگوێ بخە |
| هۆکاری جیاوازی تۆمار بکە | ڕێکخستنەکان بەبێ ڕوونکردنەوە تۆمار بکە |

---

## تایبەتمەندی ٦: ڕێگەکانی تێچوو

### چییە؟

ڕێگەکانی تێچوو دیاری دەکەن چۆن تێچووی کۆگا حیساب دەکرێت کاتێک کاڵا دەفرۆشرێت یان ڕێکدەخرێت. ڕێگە جیاوازەکان تێچووی کاڵای فرۆشراو (COGS) و نرخی کۆگای جیاواز بەرهەم دەهێنن.

### ڕێگە بەردەستەکان

| ڕێگە | ناوی تەواو | باشترینە بۆ |
|------|-----------|------------|
| **FIFO** | یەکەم هاتوو یەکەم دەرچوو | کاڵای وەسیو، زۆربەی کارەکان |
| **LIFO** | دوایین هاتوو یەکەم دەرچوو | باشترکردنی باج (کە ڕێگەپێدراوە) |
| **AVCO** | تێچووی مامناوەندی کێشدار | کارە سادەکان، تێچووی گۆڕاو |
| **دیاریکراو** | ناسینی دیاریکراو | کاڵای تایبەت/گرانبها |

### چۆن بەکاربهێنیت

1. کاڵاکە دەستکاری بکە
2. **ڕێگەی تێچوو** هەڵبژێرە:
   - FIFO (بنەڕەت)
   - LIFO
   - AVCO
   - دیاریکراو (پێویستی بە بەدواداچوونی زنجیرە هەیە)
3. پاشکەوت بکە

---

## تایبەتمەندی ٧: یاساکانی داواکردنەوە

### چییە؟

یاساکانی داواکردنەوە بە شێوەی خۆکار ئاگاداری دەدات کاتێک کۆگا دەکەوێتە خوار ئاستێک، و بە هەڵبژاردن حیساب دەکات چەند داوا بکرێت. ڕێگری لە تەواوبوونی کاڵای باو دەکات.

### چەمکە سەرەکییەکان

| زاراوە | پێناسە |
|--------|--------|
| **خاڵی داواکردنەوە** | ئاستی کۆگا کە ئاگادارییەکە دەست پێ دەکات |
| **بڕی داواکردنەوە** | چەند داوا بکرێت |
| **کەمترین بڕ** | ئەمەوە کەمتر مەبە |
| **زۆرترین بڕ** | ئەمەوە زیاتر داوا مەکە |
| **کاتی گەیاندن** | ڕۆژ بۆ گەیاندن |

### چۆن بەکاربهێنیت (هەنگاوەکانی ڕووکار)

#### دروستکردنی یاسای داواکردنەوە

1. بڕۆ بۆ **کۆگا > یاساکانی داواکردنەوە** یان کاڵاکە دەستکاری بکە
2. کلیک لەسەر **دروستکردنی یاسا**
3. دابنێ:
   - **کاڵا** و **کۆگا**
   - **کەمترین بڕ** (کۆگای سەلامەتی)
   - **زۆرترین بڕ** (سنووری هەڵگرتن)
   - **خاڵی داواکردنەوە** (کەی ئاگادار بکات)
   - **بڕی داواکردنەوە** (چەند داوا بکات)
   - **ڕۆژی کاتی گەیاندن** (کاتی گەیاندن)
   - **دابینکەری پەسەندکراو** (بژاردەیی)
   - **چالاکە** (Checkbox)
4. پاشکەوت بکە

### کۆد

```php
use App\Models\ReorderRule;

// دروستکردنی یاسای داواکردنەوە
$rule = ReorderRule::create([
    'product_id' => $product->id,
    'warehouse_id' => $warehouse->id,
    'supplier_id' => $preferredSupplier->id,
    'minimum_quantity' => 10,
    'maximum_quantity' => 100,
    'reorder_point' => 25,
    'reorder_quantity' => 50,
    'lead_time_days' => 7,
    'is_active' => true,
]);

// پشکنین ئایا پێویستی بە داواکردنەوە هەیە
if ($rule->needsReorder()) {
    $suggestedQty = $rule->getSuggestedOrderQuantity();
}
```

---

## چارەسەرکردنی کێشە

### کۆگا نیگەتیڤ نیشان دەدات بەڵام نابێت

**کێشە:** کاڵا کۆگای نیگەتیڤ نیشان دەدات ڕەغمی ناچالاکبوونی "ڕێگادان بە نیگەتیڤ".

**چارەسەرەکان:**
1. داواکارییە چاوەڕوانەکان بپشکنە کە کۆگا حەبساندووە
2. جوڵەی کۆگا بۆ هەڵەکان پێداچوونەوە بکە
3. ژماردنی کۆگا ئەنجام بدە بۆ هاوسەنگکردن

---

### دەستە لە فرۆشتن نیشان نادرێت

**کێشە:** ناتوانم دەستە هەڵبژێرم کاتی فرۆشتن.

**چارەسەرەکان:**
1. دڵنیابە دەستە بڕی بەردەستی هەیە
2. بپشکنە دەستە بەسەرنەچووە
3. دڵنیابە دەستە لە کۆگای دروستدایە
4. دڵنیابە کاڵا بەدواداچوونی دەستەی چالاک کراوە

---

### بڕەکانی گواستنەوە هاوتا نین

**کێشە:** کەمتر وەرگیرا لە نێردراو.

**چارەسەرەکان:**
1. جیاوازییەکە بە تێبینی تۆمار بکە
2. گواستنەوە بە بڕە ڕاستەقینەی وەرگیراو تەواو بکە
3. لە کۆگای سەرچاوە بپشکنە
4. سیستەم بە شێوەی خۆکار ڕێکخستن دروست دەکات

---

### ئاگاداری داواکردنەوە نیشان نادرێت

**کێشە:** کۆگا نزمە بەڵام ئاگادارییەک نییە.

**چارەسەرەکان:**
1. دڵنیابە یاسای داواکردنەوە چالاکە
2. بپشکنە خاڵی داواکردنەوە بە دروستی دانراوە
3. دڵنیابە کۆگا لەگەڵ ڕێکخستنی یاسا دێت
4. بڕی حەبسکراو بەراورد بکە لەگەڵ کۆی بڕ

---

*دوایین نوێکردنەوە: کانوونی دووەم ٢٠٢٦*
